(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cc068db"],{"8bf7":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container"},n={class:"mt-3 text-end"},l={class:"table table-hover mt-3 align-middle"},i=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",null," 圖片 "),Object(o["h"])("th",null," 分類 "),Object(o["h"])("th",null," 產品名稱 "),Object(o["h"])("th",null," 價格 "),Object(o["h"])("th",null," 是否啟用 "),Object(o["h"])("th",null," 編輯 ")])],-1),r={key:0},d={key:1},s={key:0,class:"text-success"},u={key:1},b={class:"btn-group"},p=["onClick"],m=["onClick"];function h(t,e,c,h,j,O){var f=Object(o["J"])("AdminModal"),g=Object(o["J"])("RemoveModal"),v=Object(o["J"])("Pagination");return Object(o["B"])(),Object(o["g"])("div",a,[Object(o["k"])(f,{ref:"AdminModal",product:j.tempProduct,onUpdateProduct:O.updateProduct,"is-new":j.isNew,pagination:j.pagination.current_page},null,8,["product","onUpdateProduct","is-new","pagination"]),Object(o["k"])(g,{ref:"removemodal",item:j.tempProduct,onDelItem:O.removeProduct,pagination:j.pagination.current_page},null,8,["item","onDelItem","pagination"]),Object(o["h"])("div",n,[Object(o["h"])("button",{type:"button",class:"btn btn-accent",onClick:e[0]||(e[0]=function(t){return O.openModal("isNew")})},"新增產品")]),Object(o["h"])("table",l,[i,Object(o["h"])("tbody",null,[(Object(o["B"])(!0),Object(o["g"])(o["a"],null,Object(o["H"])(j.products,(function(t){return Object(o["B"])(),Object(o["g"])("tr",{key:t.id},[Object(o["h"])("td",null,[Object(o["h"])("div",{style:Object(o["t"])({backgroundImage:"url(".concat(t.imageUrl,")")}),class:"h-6.25 background-size-cover background-position-center"},null,4)]),Object(o["h"])("td",null,Object(o["M"])(t.category),1),Object(o["h"])("td",null,Object(o["M"])(t.title),1),Object(o["h"])("td",null,[t.price===t.origin_price?(Object(o["B"])(),Object(o["g"])("div",r,Object(o["M"])(t.price)+" 元",1)):(Object(o["B"])(),Object(o["g"])("div",d,[Object(o["h"])("del",null,"原價 "+Object(o["M"])(t.origin_price)+" 元",1),Object(o["h"])("div",null,"特價 "+Object(o["M"])(t.price)+" 元",1)]))]),Object(o["h"])("td",null,[t.is_enabled?(Object(o["B"])(),Object(o["g"])("span",s,"啟用")):(Object(o["B"])(),Object(o["g"])("span",u,"未啟用"))]),Object(o["h"])("td",null,[Object(o["h"])("div",b,[Object(o["h"])("button",{type:"button",class:"btn btn-accent btn-sm",onClick:function(e){return O.openModal("edit",t)}}," 編輯 ",8,p),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return O.openModal("remove",t)}}," 刪除 ",8,m)])])])})),128))])]),Object(o["k"])(v,{pages:j.pagination,onEmitPages:O.getProducts},null,8,["pages","onEmitPages"])])}var j=c("5530"),O=(c("99af"),c("e9c4"),c("2a53")),f=(c("a4d3"),c("e01a"),{id:"adminModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"adminModalLabel","aria-hidden":"true"}),g={class:"modal-dialog modal-xl"},v={class:"modal-content border-0"},y={class:"modal-header bg-dark text-white"},P={id:"adminModalLabel",class:"modal-title"},U={key:0},k={key:1},w=Object(o["h"])("button",{type:"button",class:"btn-close bg-primary","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},M={class:"row"},$={class:"col-sm-4"},S={class:"mb-3"},B=Object(o["h"])("label",{for:"uploadImage",class:"form-label"},"上傳檔案",-1),N={class:"mb-3"},_=Object(o["h"])("label",{for:"mainImage",class:"form-label"},"或輸入圖片網址",-1),C=["src","alt"],I={class:"mb-3"},R=Object(o["h"])("h3",null,"新增多個圖片",-1),V={key:0},X=["onUpdate:modelValue"],A=["src"],D=Object(o["h"])("div",null,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")],-1),F={class:"col-sm-8"},J={class:"mb-3"},L=Object(o["h"])("label",{for:"title",class:"form-label"},"標題",-1),E={class:"row"},H={class:"mb-3 col-md-6"},z=Object(o["h"])("label",{for:"category",class:"form-label"},"分類",-1),q={class:"mb-3 col-md-6"},G=Object(o["h"])("label",{for:"price",class:"form-label"},"單位",-1),K={class:"row"},Q={class:"mb-3 col-md-6"},T=Object(o["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),W={class:"mb-3 col-md-6"},Y=Object(o["h"])("label",{for:"price",class:"form-label"},"售價",-1),Z=Object(o["h"])("hr",null,null,-1),tt={class:"mb-3"},et=Object(o["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),ct={class:"mb-3"},ot=Object(o["h"])("label",{for:"composition",class:"form-label"},"產品成分",-1),at={class:"mb-3"},nt=Object(o["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),lt={class:"mb-3"},it={class:"form-check"},rt=Object(o["h"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),dt={class:"modal-footer"},st=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ut(t,e,c,a,n,l){return Object(o["B"])(),Object(o["g"])("div",f,[Object(o["h"])("div",g,[Object(o["h"])("div",v,[Object(o["h"])("div",y,[Object(o["h"])("h5",P,[c.isNew?(Object(o["B"])(),Object(o["g"])("span",U,"新增產品")):(Object(o["B"])(),Object(o["g"])("span",k,"編輯產品"))]),w]),Object(o["h"])("div",x,[Object(o["h"])("div",M,[Object(o["h"])("div",$,[Object(o["h"])("div",S,[B,Object(o["h"])("input",{type:"file",name:"image-upload",class:"from-control w-100",id:"uploadImage",ref:"uploadImage",onChange:e[0]||(e[0]=function(){return l.uploadImage&&l.uploadImage.apply(l,arguments)})},null,544)]),Object(o["h"])("div",N,[_,Object(o["X"])(Object(o["h"])("input",{type:"text",class:"from-control w-100",id:"mainImage","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.imageUrl=t})},null,512),[[o["R"],n.tempProduct.imageUrl]])]),Object(o["h"])("img",{src:n.tempProduct.imageUrl,alt:n.tempProduct.description,class:"img-fluid"},null,8,C),Object(o["h"])("div",I,[R,Array.isArray(n.tempProduct.imagesUrl)?(Object(o["B"])(),Object(o["g"])("div",V,[(Object(o["B"])(!0),Object(o["g"])(o["a"],null,Object(o["H"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["B"])(),Object(o["g"])(o["a"],{key:e+456},[Object(o["X"])(Object(o["h"])("input",{type:"text",class:"form-control mt-2",id:"imagesUrl","onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t}},null,8,X),[[o["R"],n.tempProduct.imagesUrl[e]]]),Object(o["h"])("img",{src:n.tempProduct.imagesUrl[e],alt:"",class:"img-fluid mt-2"},null,8,A)],64)})),128)),!n.tempProduct.imagesUrl.length||n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]?(Object(o["B"])(),Object(o["g"])("button",{key:0,onClick:e[2]||(e[2]=function(t){return n.tempProduct.imagesUrl.push("")}),type:"button",class:"btn btn-accent w-100 mt-2"}," 新增 ")):Object(o["f"])("",!0),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger w-100 mt-2",onClick:e[3]||(e[3]=function(t){return n.tempProduct.imagesUrl.pop()})}," 刪除 ")])):Object(o["f"])("",!0),D])]),Object(o["h"])("div",F,[Object(o["h"])("div",J,[L,Object(o["X"])(Object(o["h"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.title=t})},null,512),[[o["R"],n.tempProduct.title]])]),Object(o["h"])("div",E,[Object(o["h"])("div",H,[z,Object(o["X"])(Object(o["h"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.category=t})},null,512),[[o["R"],n.tempProduct.category]])]),Object(o["h"])("div",q,[G,Object(o["X"])(Object(o["h"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.unit=t})},null,512),[[o["R"],n.tempProduct.unit]])])]),Object(o["h"])("div",K,[Object(o["h"])("div",Q,[T,Object(o["X"])(Object(o["h"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.origin_price=t})},null,512),[[o["R"],n.tempProduct.origin_price]])]),Object(o["h"])("div",W,[Y,Object(o["X"])(Object(o["h"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.price=t})},null,512),[[o["R"],n.tempProduct.price]])])]),Z,Object(o["h"])("div",tt,[et,Object(o["X"])(Object(o["h"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.description=t})},"\n                ",512),[[o["R"],n.tempProduct.description]])]),Object(o["h"])("div",ct,[ot,Object(o["X"])(Object(o["h"])("textarea",{id:"composition",type:"text",class:"form-control",placeholder:"請輸入產品成分","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.composition=t})},"\n                ",512),[[o["R"],n.tempProduct.composition]])]),Object(o["h"])("div",at,[nt,Object(o["X"])(Object(o["h"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.content=t})},"\n                ",512),[[o["R"],n.tempProduct.content]])]),Object(o["h"])("div",lt,[Object(o["h"])("div",it,[Object(o["X"])(Object(o["h"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.is_enabled=t}),"true-value":1,"false-value":0},null,512),[[o["P"],n.tempProduct.is_enabled]]),rt])])])])]),Object(o["h"])("div",dt,[st,Object(o["h"])("button",{type:"button",class:"btn btn-accent",onClick:e[13]||(e[13]=function(e){return t.$emit("update-product",n.tempProduct)})},"確認")])])])],512)}var bt=c("e0ae"),pt={props:{isNew:{type:Boolean,default:!1},product:{type:Object,default:function(){return{}}}},emits:["updateProduct"],watch:{product:function(){this.tempProduct=this.product}},data:function(){return{modal:"",tempProduct:{imagesUrl:[]}}},methods:{uploadImage:function(){var t=this,e=this.$refs.uploadImage.files[0],c=new FormData;c.append("image-upload",e);var o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/admin/upload");this.$http.post(o,c).then((function(e){e.data.success&&(t.tempProduct.imageUrl=e.data.imageUrl)})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))}},mixins:[bt["a"]]},mt=c("6b0d"),ht=c.n(mt);const jt=ht()(pt,[["render",ut]]);var Ot=jt,ft=c("2bfd"),gt={data:function(){return{products:[],tempProduct:{},isNew:!1,isLoading:!1,pagination:{}}},components:{Pagination:O["a"],AdminModal:Ot,RemoveModal:ft["a"]},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$emit("loadingStatus",!0);var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/admin/products/?page=").concat(e);this.$http.get(c).then((function(e){t.$emit("loadingStatus",!1),t.products=e.data.products,t.pagination=e.data.pagination})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))},openModal:function(t,e){var c=this.$refs.AdminModal,o=this.$refs.removemodal;"isNew"===t?(this.tempProduct={imagesUrl:[]},c.showModal(),this.isNew=!0):"edit"===t?(this.tempProduct=JSON.parse(JSON.stringify(e)),this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),c.showModal(),this.isNew=!1):"remove"===t&&(o.showModal(),this.tempProduct=Object(j["a"])({},e))},updateProduct:function(t){var e=this;this.tempProduct=t;var c="post",o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/admin/product");this.isNew||(c="put",o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/admin/product/").concat(t.id));var a=this.$refs.AdminModal;this.$http[c](o,{data:this.tempProduct}).then((function(t){e.$httpMessageState(t,t.data.message),e.getProducts(),a.hideModal()}))},removeProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/admin/product/").concat(this.tempProduct.id),c=this.$refs.removemodal;this.$http.delete(e).then((function(e){c.hideModal(),t.getProducts(t.pagination)})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))}},mounted:function(){this.getProducts()}};const vt=ht()(gt,[["render",h]]);e["default"]=vt},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),l=c("e330"),i=c("1a2d"),r=c("1626"),d=c("3a9b"),s=c("577e"),u=c("9bf2").f,b=c("e893"),p=n.Symbol,m=p&&p.prototype;if(a&&r(p)&&(!("description"in m)||void 0!==p().description)){var h={},j=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),e=d(m,this)?new p(t):void 0===t?p():p(t);return""===t&&(h[e]=!0),e};b(j,p),j.prototype=m,m.constructor=j;var O="Symbol(test)"==String(p("test")),f=l(m.toString),g=l(m.valueOf),v=/^Symbol\((.*)\)[^)]+$/,y=l("".replace),P=l("".slice);u(m,"description",{configurable:!0,get:function(){var t=g(this),e=f(t);if(i(h,t))return"";var c=O?P(e,7,-1):y(e,v,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:j})}},e9c4:function(t,e,c){var o=c("23e7"),a=c("da84"),n=c("d066"),l=c("2ba4"),i=c("e330"),r=c("d039"),d=a.Array,s=n("JSON","stringify"),u=i(/./.exec),b=i("".charAt),p=i("".charCodeAt),m=i("".replace),h=i(1..toString),j=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,f=/^[\uDC00-\uDFFF]$/,g=function(t,e,c){var o=b(c,e-1),a=b(c,e+1);return u(O,t)&&!u(f,a)||u(f,t)&&!u(O,o)?"\\u"+h(p(t,0),16):t},v=r((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&o({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,c){for(var o=0,a=arguments.length,n=d(a);o<a;o++)n[o]=arguments[o];var i=l(s,null,n);return"string"==typeof i?m(i,j,g):i}})}}]);
//# sourceMappingURL=chunk-0cc068db.6cdb6edc.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbb4d086"],{"99af":function(t,e,c){"use strict";var r=c("23e7"),n=c("da84"),o=c("d039"),s=c("e8b5"),a=c("861d"),l=c("7b0b"),b=c("07fa"),d=c("8418"),u=c("65f0"),i=c("1dde"),h=c("b622"),p=c("2d00"),O=h("isConcatSpreadable"),j=9007199254740991,f="Maximum allowed index exceeded",v=n.TypeError,m=p>=51||!o((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),y=i("concat"),g=function(t){if(!a(t))return!1;var e=t[O];return void 0!==e?!!e:s(t)},x=!m||!y;r({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,r,n,o,s=l(this),a=u(s,0),i=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?s:arguments[e],g(o)){if(n=b(o),i+n>j)throw v(f);for(c=0;c<n;c++,i++)c in o&&d(a,i,o[c])}else{if(i>=j)throw v(f);d(a,i++,o)}return a.length=i,a}})},b0c0:function(t,e,c){var r=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),s=c("9bf2").f,a=Function.prototype,l=o(a.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(b.exec),u="name";r&&!n&&s(a,u,{configurable:!0,get:function(){try{return d(b,l(this))[1]}catch(t){return""}}})},ce4a:function(t,e,c){"use strict";var r=c("7a23"),n={class:"d-flex justify-content-center mt-4 text-center"},o=Object(r["h"])("p",{class:"mt-1"},"購買明細",-1),s=Object(r["h"])("p",{class:"mt-1"},"確認訂單",-1),a={class:"px-3 px-md-4 py-2 d-flex flex-column align-items-center"},l=Object(r["h"])("p",{class:"mt-1"},"付款完成",-1);function b(t,e,c,b,d,u){return Object(r["B"])(),Object(r["g"])("div",n,[Object(r["h"])("div",{class:Object(r["s"])(["step-border-light px-3 px-md-4 py-2 pos-relative d-flex flex-column align-items-center",{"step-border-dark":c.step>1}])},[Object(r["h"])("div",{class:Object(r["s"])(["step border-2 border-secondary border",{active:c.step>0}])}," 1 ",2),o],2),Object(r["h"])("div",{class:Object(r["s"])(["step-border-light px-3 px-md-4 py-2 pos-relative d-flex flex-column align-items-center",{"step-border-dark":c.step>2}])},[Object(r["h"])("div",{class:Object(r["s"])(["step border-2 border-secondary border",{active:c.step>1}])}," 2 ",2),s],2),Object(r["h"])("div",a,[Object(r["h"])("div",{class:Object(r["s"])(["step border-2 border-secondary border",{active:c.step>2}])}," 3 ",2),l])])}var d={props:["step"]},u=c("6b0d"),i=c.n(u);const h=i()(d,[["render",b]]);e["a"]=h},fd5d:function(t,e,c){"use strict";c.r(e);c("b0c0");var r=c("7a23"),n={class:"container pt-8 pb-8 pb-lg-11"},o={class:"row justify-content-center"},s={class:"col-md-6 col-lg-4"},a={class:"table table-secondary align-middle"},l=Object(r["h"])("thead",null,[Object(r["h"])("th",null,"種類"),Object(r["h"])("th",null,"數量"),Object(r["h"])("th",null,"價格")],-1),b=Object(r["h"])("td",{colspan:"2",class:"text-end"},"總計",-1),d={class:"text-end"},u={class:"table table-borderless mt-8 bg-secondary"},i=Object(r["h"])("th",null,"Email",-1),h=Object(r["h"])("th",null,"姓名",-1),p=Object(r["h"])("th",null,"收件人電話",-1),O=Object(r["h"])("th",null,"收件人地址",-1),j=Object(r["h"])("th",null,"付款狀態",-1),f={key:0},v={key:1,class:"text-success"},m={key:0,class:"text-end mt-2"},y={key:1,class:"mt-4 text-end"},g=Object(r["j"])("返回首頁"),x=Object(r["j"])("繼續買");function k(t,e,c,k,M,S){var w=Object(r["J"])("CartStep"),B=Object(r["J"])("RouterLink");return Object(r["B"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(w,{step:M.stepNum},null,8,["step"]),Object(r["h"])("div",n,[Object(r["h"])("div",o,[Object(r["h"])("div",s,[Object(r["h"])("form",{onSubmit:e[1]||(e[1]=Object(r["Y"])((function(){return S.payOrder&&S.payOrder.apply(S,arguments)}),["prevent"]))},[Object(r["h"])("table",a,[l,Object(r["h"])("tbody",null,[(Object(r["B"])(!0),Object(r["g"])(r["a"],null,Object(r["H"])(M.order.products,(function(t){return Object(r["B"])(),Object(r["g"])("tr",{key:t.id},[Object(r["h"])("td",null,Object(r["M"])(t.product.title),1),Object(r["h"])("td",null,Object(r["M"])(t.qty)+" "+Object(r["M"])(t.product.unit),1),Object(r["h"])("td",null,Object(r["M"])(Math.round(t.final_total))+" 元",1)])})),128))]),Object(r["h"])("tfoot",null,[Object(r["h"])("tr",null,[b,Object(r["h"])("td",d,Object(r["M"])(Math.round(M.order.total))+" 元",1)])])]),Object(r["h"])("table",u,[Object(r["h"])("tbody",null,[Object(r["h"])("tr",null,[i,Object(r["h"])("td",null,Object(r["M"])(M.order.user.email),1)]),Object(r["h"])("tr",null,[h,Object(r["h"])("td",null,Object(r["M"])(M.order.user.name),1)]),Object(r["h"])("tr",null,[p,Object(r["h"])("td",null,Object(r["M"])(M.order.user.tel),1)]),Object(r["h"])("tr",null,[O,Object(r["h"])("td",null,Object(r["M"])(M.order.user.address),1)]),Object(r["h"])("tr",null,[j,Object(r["h"])("td",null,[M.order.is_paid?(Object(r["B"])(),Object(r["g"])("span",v,"付款完成")):(Object(r["B"])(),Object(r["g"])("span",f,"尚未付款"))])])])]),!1===M.order.is_paid?(Object(r["B"])(),Object(r["g"])("div",m,[Object(r["h"])("button",{class:"btn btn-accent",type:"button",onClick:e[0]||(e[0]=function(){return S.payOrder&&S.payOrder.apply(S,arguments)})},"確認付款去")])):Object(r["f"])("",!0),M.order.is_paid?(Object(r["B"])(),Object(r["g"])("div",y,[Object(r["k"])(B,{to:"/",class:"btn btn-sm btn-outline-dark rounded-0 me-2 me-lg-4 p-lg-1",type:"button"},{default:Object(r["W"])((function(){return[g]})),_:1}),Object(r["k"])(B,{to:"/products",class:"btn btn-sm btn-outline-accent rounded-0 p-lg-1",type:"button"},{default:Object(r["W"])((function(){return[x]})),_:1})])):Object(r["f"])("",!0)],32)])])])],64)}c("99af");var M=c("6be2"),S=c("ce4a"),w={data:function(){return{orderId:"",order:{user:{}},stepNum:0}},components:{CartStep:S["a"]},methods:{getOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/order/").concat(this.orderId);this.$http.get(e).then((function(e){t.order=e.data.order,t.stepNum=2})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))},payOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/pay/").concat(this.orderId);this.$http.post(e).then((function(){t.getOrder(),t.$router.push("/payfinished"),t.getCart()})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("judyhexschoolforvue","/cart");this.$http.get(e).then((function(){M["a"].emit("clear-cart",{})})).catch((function(e){t.$httpMessageState(e.response,"錯誤訊息")}))}},mounted:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},B=c("6b0d"),$=c.n(B);const C=$()(w,[["render",k]]);e["default"]=C}}]);
//# sourceMappingURL=chunk-cbb4d086.dfad10f5.js.map